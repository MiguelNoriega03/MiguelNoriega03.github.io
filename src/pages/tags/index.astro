---
import { getCollection } from 'astro:content';
import Subscribe from '../../components/Subscribe.astro';
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getAllTags, getPostsByTag, sortItemsByDateDesc } from '../../utils/data-utils';

const posts = (await getCollection('blog')).sort(sortItemsByDateDesc);
const tags = getAllTags(posts).sort((tagA, tagB) => {
    const postCountTagA = getPostsByTag(posts, tagA.id).length;
    const postCountTagB = getPostsByTag(posts, tagB.id).length;
    return postCountTagB - postCountTagA;
});
---

<BaseLayout
    title="Resources"
    description="Explora contenido por tema: ventas, finanzas, automatización, IA y procesos."
    showHeader={false}
>
    <h1 class="mb-4 font-serif text-2xl italic sm:mb-8 sm:text-4xl">Resources</h1>
        <p class="mb-8 text-base sm:text-lg text-theme-foreground/90">Explora contenido por tema: ventas, finanzas, automatización, IA y procesos.</p>
                <!-- Tags sugeridos en el lugar de los tags dinámicos -->
        <div class="mb-12 flex flex-wrap gap-3">
            <a href="/tags/sales-systems" class="inline-block rounded-full border border-main/30 bg-main/10 px-4 py-1 text-sm font-semibold hover:bg-main/20 transition">Sales Systems</a>
            <a href="/tags/crm-follow-up" class="inline-block rounded-full border border-main/30 bg-main/10 px-4 py-1 text-sm font-semibold hover:bg-main/20 transition">CRM &amp; Follow-Up</a>
            <a href="/tags/finance" class="inline-block rounded-full border border-main/30 bg-main/10 px-4 py-1 text-sm font-semibold hover:bg-main/20 transition">Finance</a>
            <a href="/tags/automation" class="inline-block rounded-full border border-main/30 bg-main/10 px-4 py-1 text-sm font-semibold hover:bg-main/20 transition">Automation</a>
            <a href="/tags/ai-for-smb" class="inline-block rounded-full border border-main/30 bg-main/10 px-4 py-1 text-sm font-semibold hover:bg-main/20 transition">AI for SMB</a>
            <a href="/tags/hiring" class="inline-block rounded-full border border-main/30 bg-main/10 px-4 py-1 text-sm font-semibold hover:bg-main/20 transition">Hiring</a>
            <a href="/tags/case-studies" class="inline-block rounded-full border border-main/30 bg-main/10 px-4 py-1 text-sm font-semibold hover:bg-main/20 transition">Case Studies</a>
        </div>
    {/* Aquí se eliminan los tags dinámicos, solo sugeridos */}
    <Subscribe class="my-16 sm:my-24" />
</BaseLayout>
